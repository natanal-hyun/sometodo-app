# Some To Do - ì¼ì •, ê°€ê³„ë¶€ ê´€ë¦¬ ì•±

## ğŸ’¡ 1. í”„ë¡œì íŠ¸ ê°œìš”

### ğŸ“Œ í”„ë¡œì íŠ¸ëª…  
**SomeToDo** â€“ ì¼ì • ë° ê°€ê³„ë¶€ ê´€ë¦¬ í†µí•© ì•±

### ğŸ¯ ëª©ì   
í•˜ë£¨ì˜ ìŠ¤ì¼€ì¤„ê³¼ ì§€ì¶œ ë‚´ì—­ì„ í•œ ê³³ì—ì„œ ê´€ë¦¬í•  ìˆ˜ ìˆë„ë¡ ë•ëŠ” í†µí•©í˜• ëª¨ë°”ì¼ ì• í”Œë¦¬ì¼€ì´ì…˜ ê°œë°œ  
â†’ ì‚¬ìš©ì ì¤‘ì‹¬ì˜ **ê°„í¸í•œ UI/UX**, **ê³„ì • ì¸ì¦ ë° ë³´ì•ˆ**, **ë°ì´í„° ì €ì¥ ë° ì—°ë™**ì— ì¤‘ì ì„ ë‘ì–´ ì„¤ê³„

### ğŸ•’ ê°œë°œ ê¸°ê°„  
**2024. 02. 25 ~ 2024. 03. 28 (ì•½ 5ì£¼)**

| ì£¼ì°¨       | ì£¼ìš” ë‚´ìš© |
|------------|-----------|
| **1ì£¼ì°¨** | ì£¼ì œ ì„ ì • ë° ìš”êµ¬ì‚¬í•­ ë¶„ì„, ì£¼ìš” ê¸°ëŠ¥ ê¸°íš ë° ê¸°ìˆ  ìŠ¤íƒ ê²°ì • |
| **2~3ì£¼ì°¨** | ê°œì¸ë³„ íŒŒíŠ¸ ë¶„ë‹´ ë° ê¸°ëŠ¥ë³„ ì„¤ê³„, í™”ë©´ UI ì´ˆì•ˆ ì œì‘, ê¸°ëŠ¥ ë‹¨ìœ„ ê°œë°œ ì§„í–‰ |
| **4ì£¼ì°¨** | ì½”ë“œ í†µí•© ë° í™”ë©´ ì—°ë™, API ì—°ê²° í…ŒìŠ¤íŠ¸, ì˜ˆì™¸ ì²˜ë¦¬ ë° ì˜¤ë¥˜ ìˆ˜ì • |
| **5ì£¼ì°¨** | ë””ë²„ê¹… ë° ì„±ëŠ¥ ê°œì„ , AWS EC2ë¥¼ í†µí•œ ë°°í¬, í”„ë¡œì íŠ¸ ë¬¸ì„œ ì •ë¦¬ ë° ë°œí‘œ ì¤€ë¹„ |

### ğŸ§‘â€ğŸ’» íŒ€ êµ¬ì„± (ì´ 3ì¸)
| ì´ë¦„       | ì—­í•                | ì£¼ìš” ë‹´ë‹¹ ê¸°ëŠ¥ |
|------------|--------------------|----------------|
| ì—„ì •í˜„ (ë³¸ì¸) | **ê³„ì • íŒŒíŠ¸ ê°œë°œ**     | íšŒì›ê°€ì…, ë¡œê·¸ì¸, JWT ì¸ì¦, êµ¬ê¸€ ë¡œê·¸ì¸, í”„ë¡œí•„ ê´€ë¦¬ |
| [ë°±ê±´ìš°](https://github.com/gunwoo100/project_schedule)     | ì¼ì • ê¸°ëŠ¥ ê°œë°œ         | ì¼ì • ë“±ë¡, ì¡°íšŒ, ìˆ˜ì •, ì‚­ì œ ë° UI êµ¬ì„± |
| [ê¹€ì§€ìš±](https://github.com/orangetunnelkim/moneyFlow)     | ê°€ê³„ë¶€ ê¸°ëŠ¥ ê°œë°œ      | ì§€ì¶œ ë“±ë¡, í†µê³„ í™”ë©´, ê°€ê³„ë¶€ UI ë° ë°±ì—”ë“œ ë¡œì§ |

### ğŸ›  ê¸°ìˆ  ìŠ¤íƒ
- **Frontend**: Android (Java), Retrofit2, Glide, SharedPreferences  
- **Backend**: Spring Boot, Spring Security, JPA, PostgreSQL, JWT

---

## âœ… 2. í•µì‹¬ ê¸°ëŠ¥ ìš”ì•½

ì´ í”„ë¡œì íŠ¸ì˜ ê³„ì • íŒŒíŠ¸ëŠ” ì‚¬ìš©ì ì¸ì¦ ë° ì •ë³´ ê´€ë¦¬ë¥¼ ì¤‘ì‹¬ìœ¼ë¡œ ë‹¤ìŒê³¼ ê°™ì€ í•µì‹¬ ê¸°ëŠ¥ì„ í¬í•¨í•©ë‹ˆë‹¤. ê° ê¸°ëŠ¥ì€ ì´ë¯¸ì§€ ë˜ëŠ” gifì™€ í•¨ê»˜ ì§ê´€ì ìœ¼ë¡œ ì´í•´í•  ìˆ˜ ìˆë„ë¡ êµ¬ì„±ë˜ì–´ ìˆìŠµë‹ˆë‹¤.

---

### 1ï¸âƒ£ ë¡œê·¸ì¸ í™”ë©´ (ğŸ“± Android í™”ë©´)

- **ì´ë©”ì¼/ë¹„ë°€ë²ˆí˜¸ ë˜ëŠ” êµ¬ê¸€ ê³„ì •ìœ¼ë¡œ ë¡œê·¸ì¸ ê°€ëŠ¥**
- **ì…ë ¥ê°’ ìœ íš¨ì„± ê²€ì‚¬ ë° ë¡œê·¸ì¸ ì‹¤íŒ¨ ì•ˆë‚´ ì²˜ë¦¬**
- ë¡œê·¸ì¸ ì„±ê³µ ì‹œ, ìë™ìœ¼ë¡œ JWT í† í° ì €ì¥

![image](https://github.com/user-attachments/assets/becbf6b5-96e0-4f6c-8c58-77011824a966)

---

### 2ï¸âƒ£ íšŒì›ê°€ì… í™”ë©´

- **ì´ë©”ì¼, ë¹„ë°€ë²ˆí˜¸, ë‹‰ë„¤ì„ ì…ë ¥ë§Œìœ¼ë¡œ ê°„í¸ ê°€ì…**
- **ì…ë ¥ê°’ ìœ íš¨ì„± + ì´ë©”ì¼/ë‹‰ë„¤ì„ ì¤‘ë³µ ê²€ì‚¬ í¬í•¨**
- íšŒì›ê°€ì… ì„±ê³µ ì‹œ ë¡œê·¸ì¸ í™”ë©´ìœ¼ë¡œ ì´ë™

![image](https://github.com/user-attachments/assets/cb9fcce7-2b97-4190-923e-14f2404e2bf8)

---

### 3ï¸âƒ£ ì„¤ì • í˜ì´ì§€

- **í”„ë¡œí•„ ë³´ê¸°, ìˆ˜ì •, ë¹„ë°€ë²ˆí˜¸ ë³€ê²½, ë¡œê·¸ì•„ì›ƒ ê¸°ëŠ¥ ì œê³µ**
- í•˜ë‹¨ ë©”ë‰´ì˜ â€˜ì„¤ì •â€™ì—ì„œ ì ‘ê·¼ ê°€ëŠ¥

![image](https://github.com/user-attachments/assets/39edc96b-8091-4f33-beb9-83153d404007)

---

### 4ï¸âƒ£ í”„ë¡œí•„ ìˆ˜ì • í™”ë©´

- **ë‹‰ë„¤ì„, ìƒíƒœ ë©”ì‹œì§€, í”„ë¡œí•„ ì´ë¯¸ì§€ ìˆ˜ì • ê°€ëŠ¥**
- ìˆ˜ì • í›„ì—ëŠ” ë³€ê²½ëœ ë‚´ìš©ì„ ë°˜ì˜í•œ ìƒˆë¡œìš´ Access Token ë°œê¸‰

![image](https://github.com/user-attachments/assets/dd0f74f2-0485-4991-a069-b88364005d1d)

---

### 5ï¸âƒ£ êµ¬ê¸€ ë¡œê·¸ì¸ (ì†Œì…œ ë¡œê·¸ì¸)

- **Firebase ì—†ì´ Google OAuth2.0ìœ¼ë¡œ êµ¬í˜„**
- **idTokenì„ ë°›ì•„ ë°±ì—”ë“œì—ì„œ ê²€ì¦ ë° ìë™ íšŒì›ê°€ì… ì²˜ë¦¬**
- ì´ë©”ì¼ ì¤‘ë³µ ì‹œ ê¸°ì¡´ ê³„ì •ìœ¼ë¡œ ë¡œê·¸ì¸ ì‹¤íŒ¨ ì²˜

![image](https://github.com/user-attachments/assets/495fe2e1-975a-444d-b1d3-395e91333d2d)

---

### ğŸ” ì°¸ê³ 

- ì´ ì„¹ì…˜ì€ **ì£¼ìš” ê¸°ëŠ¥ì˜ êµ¬ì¡°ì™€ íë¦„ì„ ì‹œê°ì ìœ¼ë¡œ ë³´ì—¬ì£¼ëŠ” ì—­í• **ì„ í•©ë‹ˆë‹¤.
- ì‹¤ì œ ë™ì‘ ì¥ë©´ì„ ìì„¸íˆ ë³´ê³  ì‹¶ë‹¤ë©´ ì•„ë˜ì˜ **4. ì‹œì—° ì˜ìƒ** ì„¹ì…˜ì—ì„œ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

---

## 3. ê¸°ëŠ¥ êµ¬í˜„

ê³„ì • íŒŒíŠ¸ì—ì„œ êµ¬í˜„í•œ ì£¼ìš” ê¸°ëŠ¥ë“¤ì„ ì‹¤ì œ íë¦„ì— ë§ì¶° ì„¤ëª…í•˜ê³ , ê° ê¸°ëŠ¥ì˜ êµ¬í˜„ ë°©ì‹ì„ ê°„ë‹¨íˆ ì†Œê°œí•©ë‹ˆë‹¤.

---

### âœ… íšŒì›ê°€ì…

- **Android**
   - ì´ë©”ì¼, ë¹„ë°€ë²ˆí˜¸, ë‹‰ë„¤ì„ì„ ì…ë ¥ë°›ê³  **ìœ íš¨ì„± ê²€ì‚¬**ë¥¼ ìˆ˜í–‰í•©ë‹ˆë‹¤.
   - ì…ë ¥ê°’ í™•ì¸ í›„ `SignupRequest` DTOë¥¼ ìƒì„±í•˜ì—¬ ì„œë²„ì— ì „ì†¡í•©ë‹ˆë‹¤.  
   - ì„œë²„ ì‘ë‹µì— ë”°ë¼ ì„±ê³µ ë©”ì‹œì§€ë¥¼ ì¶œë ¥í•˜ê±°ë‚˜ ì‹¤íŒ¨ ì•Œë¦¼ì„ ë„ì›ë‹ˆë‹¤.
  
   ```java
   public void onSignupButtonClick(View view) {
        String email = etEmail.getText().toString().trim();
        String password = etPassword.getText().toString().trim();
        String passwordCheck = etPasswordCheck.getText().toString().trim();
        String nickname = etNickname.getText().toString().trim();

        // 1ï¸âƒ£ ì…ë ¥ê°’ ê²€ì¦
        if (email.isEmpty() || password.isEmpty() || passwordCheck.isEmpty() || nickname.isEmpty()) {
            Toast.makeText(this, "ëª¨ë“  í•„ë“œë¥¼ ì…ë ¥í•˜ì„¸ìš”.", Toast.LENGTH_SHORT).show();
            return;
        }

        if (!Patterns.EMAIL_ADDRESS.matcher(email).matches()) {
            Toast.makeText(this, "ì˜¬ë°”ë¥¸ ì´ë©”ì¼ í˜•ì‹ì„ ì…ë ¥í•˜ì„¸ìš”.", Toast.LENGTH_SHORT).show();
            return;
        }

        if (!password.equals(passwordCheck)) {
            Toast.makeText(this, "ë¹„ë°€ë²ˆí˜¸ê°€ ì¼ì¹˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.", Toast.LENGTH_SHORT).show();
            return;
        }

        if (password.length() < 8 || password.length() > 20) {
            Toast.makeText(this, "ë¹„ë°€ë²ˆí˜¸ëŠ” 8ì ì´ìƒ 20ì ì´í•˜ì´ì–´ì•¼ í•©ë‹ˆë‹¤.", Toast.LENGTH_SHORT).show();
            return;
        }

        if (!nickname.matches("^[a-zA-Z0-9ê°€-í£]+$")) {
            Toast.makeText(this, "ë‹‰ë„¤ì„ì€ ì˜ë¬¸, ìˆ«ì, í•œê¸€ë§Œ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.", Toast.LENGTH_SHORT).show();
            return;
        }

        if (nickname.length() < 2 || nickname.length() > 12) {
            Toast.makeText(this, "ë‹‰ë„¤ì„ì€ 2ì ì´ìƒ 12ì ì´í•˜ì´ì–´ì•¼ í•©ë‹ˆë‹¤.", Toast.LENGTH_SHORT).show();
            return;
        }

        // 2ï¸âƒ£ API ìš”ì²­ì„ ìœ„í•œ SignupRequest ê°ì²´ ìƒì„±
        SignupRequest signupRequest = new SignupRequest(email, password, passwordCheck, nickname);

        // 3ï¸âƒ£ Retrofitì„ í†µí•´ íšŒì›ê°€ì… ìš”ì²­
        AuthApiService authApiService = RetrofitClient.getClient().create(AuthApiService.class);
        Call<Void> call = authApiService.signup(signupRequest);

        call.enqueue(new Callback<Void>() {
            @Override
            public void onResponse(@NonNull Call<Void> call, @NonNull Response<Void> response) {
                if (response.isSuccessful()) {
                    Toast.makeText(SignupActivity.this, "íšŒì›ê°€ì… ì„±ê³µ!", Toast.LENGTH_SHORT).show();

                    // 4ï¸âƒ£ ì„±ê³µ ì‹œ ë¡œê·¸ì¸ í™”ë©´ìœ¼ë¡œ ì´ë™
                    finish();
                } else {
                    Toast.makeText(SignupActivity.this, "íšŒì›ê°€ì… ì‹¤íŒ¨: " + response.message(), Toast.LENGTH_SHORT).show();
                }
            }

            @Override
            public void onFailure(@NonNull Call<Void> call, @NonNull Throwable t) {
                Toast.makeText(SignupActivity.this, "ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜ ë°œìƒ", Toast.LENGTH_SHORT).show();
            }
        });
    }   
   ```

- **Backend**
   - ì´ë©”ì¼ ë° ë‹‰ë„¤ì„ **ì¤‘ë³µ ê²€ì‚¬**
   - ë¹„ë°€ë²ˆí˜¸ **BCrypt ì•”í˜¸í™”** í›„ ì €ì¥
   - `Account` / `Profile` í…Œì´ë¸”ì— ë¶„ë¦¬ ì €ì¥
  
   ```java
   public void registerAccount(@Valid SignupRequest request) {
      // ì´ë©”ì¼ ì¤‘ë³µ ì²´í¬
      if (accountRepository.existsByEmail(request.getEmail()))
         throw new IllegalArgumentException("ì´ë¯¸ ì‚¬ìš© ì¤‘ì¸ ì´ë©”ì¼ì…ë‹ˆë‹¤.");
      // ë‹‰ë„¤ì„ ì¤‘ë³µ ì²´í¬
      if (profileRepository.existsByNickname(request.getNickname()))
         throw new IllegalArgumentException("ì´ë¯¸ ì‚¬ìš© ì¤‘ì¸ ë‹‰ë„¤ì„ì…ë‹ˆë‹¤.");

      Account account = Account.builder()
            .email(request.getEmail())
            .password(passwordEncoder.encode(request.getPassword())) // ì•”í˜¸í™”ëœ ë¹„ë°€ë²ˆí˜¸ ì €ì¥
            .authProvider(AuthProvider.EMAIL)
            .role(UserRole.USER)
            .status(UserStatus.ACTIVE)
            .createdAt(LocalDateTime.now())
            .updatedAt(LocalDateTime.now())
            .build();

      accountRepository.save(account);

      Profile profile = Profile.builder()
            .account(account)
            .nickname(request.getNickname())
            .updatedAt(LocalDateTime.now())
            .build();

      profileRepository.save(profile);
   }
   ```

---

### âœ… ë¡œê·¸ì¸

- **Android**
   - ì‚¬ìš©ìê°€ ì…ë ¥í•œ ì´ë©”ì¼ê³¼ ë¹„ë°€ë²ˆí˜¸ë¡œ ì„œë²„ì— ìš”ì²­
   - ë¡œê·¸ì¸ ì„±ê³µ ì‹œ **Access Token**ê³¼ **Refresh Token**ì„ ë°œê¸‰ë°›ì•„ `TokenManager`ì— ì €ì¥

   ```java
   public void onLoginButtonClick(View view) {
      String email = etEmail.getText().toString().trim();
      String password = etPassword.getText().toString().trim();

      if (email.isEmpty() || password.isEmpty()) {
         Toast.makeText(this, "ì´ë©”ì¼ê³¼ ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”.", Toast.LENGTH_SHORT).show();
         return;
      }

      if (!Patterns.EMAIL_ADDRESS.matcher(email).matches()) {
         Toast.makeText(this, "ì˜¬ë°”ë¥¸ ì´ë©”ì¼ í˜•ì‹ì„ ì…ë ¥í•˜ì„¸ìš”.", Toast.LENGTH_SHORT).show();
         return;
      }

      AuthApiService apiService = RetrofitClient.getClient().create(AuthApiService.class);
      Call<LoginResponse> call = apiService.login(new LoginRequest(email, password));
      
      call.enqueue(new Callback<LoginResponse>() {
         @Override
         public void onResponse(@NonNull Call<LoginResponse> call, @NonNull Response<LoginResponse> response) {
            if (response.isSuccessful() && response.body() != null) {
               loginSuccess(response.body());
            } else {
               try (ResponseBody errorBody = response.errorBody()) {  // âœ… try-with-resources ì‚¬ìš©
                  if (errorBody != null) {
                     Toast.makeText(LoginActivity.this, "ë¡œê·¸ì¸ ì‹¤íŒ¨: " + errorBody.string(), Toast.LENGTH_SHORT).show();
                  } else {
                     Toast.makeText(LoginActivity.this, "ë¡œê·¸ì¸ ì‹¤íŒ¨: ì•Œ ìˆ˜ ì—†ëŠ” ì˜¤ë¥˜", Toast.LENGTH_SHORT).show();
                  }
               } catch (Exception e) {
                  Toast.makeText(LoginActivity.this, "ë¡œê·¸ì¸ ì‹¤íŒ¨: ì‘ë‹µ ì²˜ë¦¬ ì˜¤ë¥˜", Toast.LENGTH_SHORT).show();
               }
            }
         }
         
         @Override
         public void onFailure(@NonNull Call<LoginResponse> call, @NonNull Throwable t) {
            Toast.makeText(LoginActivity.this, "ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜ ë°œìƒ", Toast.LENGTH_SHORT).show();
         }
      });
   }
   ```

- **Backend**
   - ì´ë©”ì¼ ì¡´ì¬ ì—¬ë¶€ í™•ì¸ í›„, ë¹„ë°€ë²ˆí˜¸ ê²€ì¦
   - ê²€ì¦ ì„±ê³µ ì‹œ JWT í† í° ìƒì„± ë° ì‘ë‹µ
  
   ```java
   public Map<String, String>  login(@Valid LoginRequest request) {
      // ì´ë©”ì¼ë¡œ ì‚¬ìš©ì ì¡°íšŒ
      Account account = accountRepository.findByEmail(request.getEmail())
         .orElseThrow(() -> new IllegalArgumentException("ì´ë©”ì¼ ë˜ëŠ” ë¹„ë°€ë²ˆí˜¸ê°€ ì˜ëª»ë˜ì—ˆìŠµë‹ˆë‹¤."));
      
      // ë¹„ë°€ë²ˆí˜¸ ê²€ì¦
      if (!passwordEncoder.matches(request.getPassword(), account.getPassword())) {
         throw new IllegalArgumentException("ì´ë©”ì¼ ë˜ëŠ” ë¹„ë°€ë²ˆí˜¸ê°€ ì˜ëª»ë˜ì—ˆìŠµë‹ˆë‹¤.");
      }
      
      return getTokens(account);
   }
   ```

   ```java
   private Map<String, String> getTokens(Account account) {
      // í”„ë¡œí•„ ì •ë³´ ì¡°íšŒ
      Profile profile = profileRepository.findByAccount(account)
         .orElseThrow(() -> new IllegalArgumentException("í”„ë¡œí•„ ì •ë³´ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤."));
      
      // ì‚¬ìš©ì ì •ë³´
      UserResponse userResponse = UserResponse.builder()
         .email(account.getEmail())
         .nickname(profile.getNickname())
         .imageUrl(profile.getImageUrl())
         .statusMessage(profile.getStatusMessage())
         .role(account.getRole())
         .build();
      
      String accessToken = jwtUtil.generateAccessToken(userResponse);
      String refreshToken = jwtUtil.generateRefreshToken(userResponse);
      
      Optional<RefreshToken> existingToken = refreshTokenRepository.findByAccount(account);
      
      if (existingToken.isPresent()) {
         // ê¸°ì¡´ Refresh Token ì—…ë°ì´íŠ¸
         RefreshToken refreshTokenEntity = existingToken.get();
         refreshTokenEntity.setToken(refreshToken);
         refreshTokenEntity.setExpirationDate(LocalDateTime.now().plusDays(7));
         refreshTokenRepository.save(refreshTokenEntity);
      } else {
         refreshTokenRepository.save(
            RefreshToken.builder()
            .token(refreshToken)
            .account(account)
            .expirationDate(LocalDateTime.now().plusDays(7))
            .build()
         );
      }
      
      account.setLastLoginAt(LocalDateTime.now());
      accountRepository.save(account);
      
      Map<String, String> tokens = new HashMap<>();
      tokens.put("accessToken", accessToken);
      tokens.put("refreshToken", refreshToken);
      
      return tokens;
   }
   ```

---

